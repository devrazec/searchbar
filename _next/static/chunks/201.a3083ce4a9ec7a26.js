(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{5201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var r=n(95155),l=n(12115);let o=(0,l.createContext)(null);function a(){let e=(0,l.use)(o);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var u=n(55027),i=n.n(u);let c=(0,l.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:a,id:i,placeholder:c,style:s,whenReady:f,zoom:d,...p},m){let[y]=(0,l.useState)({className:a,id:i,style:s}),[g,v]=(0,l.useState)(null),x=(0,l.useRef)(void 0);(0,l.useImperativeHandle)(m,()=>g?.map??null,[g]);let h=(0,l.useCallback)(r=>{if(null!==r&&!x.current){let l=new u.Map(r,p);x.current=l,null!=n&&null!=d?l.setView(n,d):null!=e&&l.fitBounds(e,t),null!=f&&l.whenReady(f),v(Object.freeze({__version:1,map:l}))}},[]);(0,l.useEffect)(()=>()=>{g?.map.remove()},[g]);let b=g?l.createElement(o,{value:g},r):c??null;return l.createElement("div",{...y,ref:h},b)});var s=n(47650);function f(e,t){let n=(0,l.useRef)(t);(0,l.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function d(e,t){let n=(0,l.useRef)(void 0);(0,l.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function p(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function m(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function y(e,t){return null==t?function(t,n){let r=(0,l.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let o=(0,l.useRef)(void 0);o.current||(o.current=e(n,r));let a=(0,l.useRef)(n),{instance:u}=o.current;return(0,l.useEffect)(function(){a.current!==n&&(t(u,n,a.current),a.current=n)},[u,n,t]),o}}function g(e){return function(t){var n;let r=a(),o=e(p(t,r),r);return f(r.map,t.attribution),d(o.current,t.eventHandlers),n=o.current,(0,l.useEffect)(function(){return(r.layerContainer??r.map).addLayer(n.instance),function(){r.layerContainer?.removeLayer(n.instance),r.map.removeLayer(n.instance)}},[r,n]),o}}let v=function(e,t){var n;return n=g(y(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r}=n(e).current;return(0,l.useImperativeHandle)(t,()=>r),null})}(function({url:e,...t},n){return m(new u.TileLayer(e,p(t,n)),n)},function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l);let{url:o}=t;null!=o&&o!==n.url&&e.setUrl(o)});function x(){return a().map}n(35603),n(78682);var h=n(63680),b=n(12669),C=n(71137);let j=()=>{let e=x(),{geoZoomView:t,setGeoZoomView:n,geoInitialView:o,setGeoInitialView:a}=(0,l.useContext)(h.F);return(0,l.useEffect)(()=>{let n=document.querySelector(".leaflet-control-zoom");if(!n)return;let l=i().DomUtil.create("a","leaflet-control-zoom-reset",n);l.href="#",l.title="Return to default view",l.classList.add("leaflet-control-zoom-in"),l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.width="30px",l.style.height="30px",l.style.fontSize="30px",l.style.cursor="pointer";let a=document.createElement("span");l.appendChild(a);let u=(0,b.createRoot)(a);return u.render((0,r.jsx)(C.C42,{style:{fontSize:20,color:"#000"}})),l.onclick=n=>{n.preventDefault(),e.setView(o,t,{animate:!0})},()=>{n.contains(l)&&n.removeChild(l),u.unmount()}},[e,a,n]),null},w=()=>{let e=x();return(0,l.useEffect)(()=>{let t=document.querySelector(".leaflet-control-zoom");if(!t)return;let n=i().DomUtil.create("a","leaflet-control-zoom-location leaflet-control-zoom-in",t);n.href="#",n.title="Show my location",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.width="30px",n.style.height="30px",n.style.fontSize="30px",n.style.cursor="pointer";let l=document.createElement("span");n.appendChild(l);let o=(0,b.createRoot)(l);return o.render((0,r.jsx)(C.l5n,{style:{fontSize:20,color:"#000"}})),n.onclick=t=>{if(t.preventDefault(),!navigator.geolocation)return void alert("Geolocation not supported");navigator.geolocation.getCurrentPosition(t=>{let{latitude:n,longitude:r}=t.coords;e.panTo([n,r],{animate:!0}),i().circleMarker([n,r],{radius:8,weight:2,color:"#00473C",fillColor:"#057642",fillOpacity:.7}).addTo(e)},()=>{alert("Unable to get your location")})},()=>{t.contains(n)&&t.removeChild(n),o.unmount()}},[e]),null},E=()=>{let e=x(),{geoPortugal:t}=(0,l.useContext)(h.F);return(0,l.useEffect)(()=>{if(!e)return;let n=t.features[0].geometry,r=[];if("Polygon"===n.type){let e=n.coordinates[0].map(e=>{let[t,n]=e;return[n,t]});r.push(e)}else"MultiPolygon"===n.type&&n.coordinates.forEach(e=>{let t=e[0].map(e=>{let[t,n]=e;return[n,t]});r.push(t)});let l=r.map(t=>i().polygon(t,{color:"#3b82f6",weight:3,fillColor:"#3b82f6",fillOpacity:.25}).addTo(e));return()=>{l.forEach(t=>e.removeLayer(t))}},[e]),null},z=()=>{let e=x(),{geoLisbon:t,geoPorto:n,geoFaro:r,geoCoimbra:o,geoBraga:a,geoBraganca:u,geoLeiria:c,geoGuarda:s,geoBeja:f,geoViana:d,geoVilaReal:p,geoSetubal:m}=(0,l.useContext)(h.F),y={Lisbon:t,Porto:n,Faro:r,Coimbra:o,Braga:a,Braganca:u,Leiria:c,Guarda:s,Beja:f,Viana:d,VilaReal:p,Setubal:m},g={Lisbon:"#f87171",Porto:"#fb923c",Faro:"#fbbf24",Coimbra:"#facc15",Braga:"#a3e635",Braganca:"#34d399",Leiria:"#2dd4bf",Guarda:"#22d3ee",Beja:"#38bdf8",Viana:"#60a5fa",VilaReal:"#818cf8",Setubal:"#c084fc"};return(0,l.useEffect)(()=>{if(!e)return;let t=[];return Object.keys(y).forEach(n=>{let r=y[n];if(!r)return;let l={color:g[n]||"#000",weight:3,fillColor:g[n]||"#000",fillOpacity:.1},o={weight:6,fillOpacity:.3},a=i().geoJSON(r,{style:l,onEachFeature:(t,r)=>{r.bindTooltip(n,{permanent:!1,direction:"top",opacity:.9}),r.on({mouseover:()=>{r.setStyle(o),i().Browser.ie||i().Browser.opera||i().Browser.edge||r.bringToFront()},mouseout:()=>{r.setStyle(l)},click:()=>{let t=r.getBounds();e.fitBounds(t,{padding:[30,30],maxZoom:11,animate:!0})}})}}).addTo(e);t.push(a)}),()=>{t.forEach(t=>e.removeLayer(t))}},[e,t,n,r,o,a,u,c,s,f,d,p,m]),null},L=function(e,t){var n;return n=g(y(e,t)),(0,l.forwardRef)(function(e,t){let{instance:r,context:a}=n(e).current;(0,l.useImperativeHandle)(t,()=>r);let{children:u}=e;return null==u?null:l.createElement(o,{value:a},u)})}(function({position:e,...t},n){var r;let l=new u.Marker(e,t);return m(l,(r={overlayContainer:l},Object.freeze({...n,...r})))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),R=function(e,t){var n,r;return n=y(e),r=function(e,r){let l=a(),o=n(p(e,l),l);return f(l.map,e.attribution),d(o.current,e.eventHandlers),t(o.current,l,e,r),o},(0,l.forwardRef)(function(e,t){let[n,o]=(0,l.useState)(!1),{instance:a}=r(e,o).current;(0,l.useImperativeHandle)(t,()=>a),(0,l.useEffect)(function(){n&&a.update()},[a,n,e.children]);let u=a._contentNode;return u?(0,s.createPortal)(e.children,u):null})}(function(e,t){return m(new u.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,l.useEffect)(function(){let{instance:l}=e;function o(e){e.popup===l&&(l.update(),r(!0))}function a(e){e.popup===l&&r(!1)}return t.map.on({popupopen:o,popupclose:a}),null==t.overlayContainer?(null!=n&&l.setLatLng(n),l.openOn(t.map)):t.overlayContainer.bindPopup(l),function(){t.map.off({popupopen:o,popupclose:a}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(l)}},[e,t,r,n])});var S=n(30308);let O=()=>{let{hoverProductId:e,setHoverProductId:t,filteredProduct:n,setSelectedProduct:o}=(0,l.useContext)(h.F);return(0,r.jsx)(r.Fragment,{children:n.map(n=>{let l;return(0,r.jsx)(L,{position:[n.lat,n.lng],icon:(l=e===n.value,i().divIcon({className:"price-marker",html:'\n      <div class="price-marker-content '.concat(l?"hovered":"",'">\n        ').concat(n.price,"\n      </div>\n    "),iconSize:[50,30],iconAnchor:[25,15]})),eventHandlers:{click:()=>o(n),mouseover:()=>t(n.value),mouseout:()=>t(null)},children:(0,r.jsx)(R,{maxWidth:220,children:(0,r.jsxs)("div",{className:"w-full max-w-xs bg-white border border-gray-200 rounded-lg shadow",children:[(0,r.jsx)("img",{src:"/searchbar/img/product/".concat(n.image),alt:n.label,className:"w-full h-32 object-cover rounded-t-lg"}),(0,r.jsxs)("div",{className:"p-3 space-y-2",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:n.label}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Location:"})," ",n.locationName]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["â‚¬ ",n.price]}),(0,r.jsx)("button",{disabled:"Rejected"===n.status,className:" inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed ",children:(0,r.jsx)(S.I7w,{className:"w-4 h-4"})})]})]})]})})},n.value)})})},I=()=>{let e=x(),{setGeoZoomView:t}=(0,l.useContext)(h.F);return!function(e){let{onEnter:t,onExit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,l.useRef)(null),a=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(!e)return;let t=document.querySelector(".leaflet-control-zoom");if(!t)return;let n=i().DomUtil.create("a","leaflet-control-zoom-in leaflet-control-fullscreen",t);n.href="#",n.title="Toggle fullscreen",Object.assign(n.style,{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",cursor:"pointer"}),i().DomEvent.disableClickPropagation(n),i().DomEvent.disableScrollPropagation(n);let l=document.createElement("span");n.appendChild(l);let u=(0,b.createRoot)(l);return u.render((0,r.jsx)(C.JaO,{style:{fontSize:18}})),n.onclick=t=>{t.preventDefault();let n=e.getContainer();document.fullscreenElement?document.exitFullscreen():n.requestFullscreen()},o.current=n,a.current=u,()=>{u.unmount(),n.remove()}},[e]),(0,l.useEffect)(()=>{if(!e)return;let r=()=>{let r=!!document.fullscreenElement;setTimeout(()=>{e.invalidateSize()},150),r?null==t||t():null==n||n()};return document.addEventListener("fullscreenchange",r),()=>{document.removeEventListener("fullscreenchange",r)}},[e,t,n])}(e,{onEnter:()=>t(8),onExit:()=>t(6)}),null},N=l.memo(()=>{let{geoZoomView:e,geoInitialView:t}=(0,l.useContext)(h.F);return(0,r.jsxs)(c,{center:t,zoom:e,scrollWheelZoom:!0,zoomControl:!0,style:{height:"100%",width:"100%"},children:[(0,r.jsx)(v,{attribution:"\xa9 Devrazec contribution",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(j,{}),(0,r.jsx)(w,{}),(0,r.jsx)(I,{}),(0,r.jsx)(E,{}),(0,r.jsx)(z,{}),(0,r.jsx)(O,{})]})})},35603:()=>{},78682:()=>{}}]);